[{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"prices-delays"},"construct":"function","inputs":[],"logging":"debug","name":"write-delayed-quote","outputs":{},"type":"Function","functionSpec":{"eventType":"trigger","functions":[{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"prices-delays"},"function":"mongodb-sink","name":"write-delayed-quote","parameters":{}}],"runtime":"nodejs12.x"},"source":"quote-delay","meta":{"identifier":"voxquotes2-write-delayed-quote-sandbox","sources":["voxquotes2-quote-delay-sandbox"]},"buildSpec":{"functionHash":"deb02d072b03d5c0641992139815bc8ce3454504","hash":"19fc4d48691dd0c9f32008a73b5d22ef161eaa9b7","templateHash":"c114a77f66d936decde6f8601dbc72647ea564b3"}},{"config":{},"construct":"tap","inputs":[],"name":"marketlink-tap","outputs":{},"source":"new-quote-hook","functionSpec":{"eventType":"stream","functions":[{"function":"marketlink-tap","name":"marketlink-tap","parameters":{}}],"runtime":"nodejs12.x"},"meta":{"identifier":"voxquotes2-marketlink-tap-sandbox","output":"voxquotes2-marketlink-tap-out-sandbox","sources":["voxquotes2-new-quote-hook-sandbox"]},"buildSpec":{"functionHash":"e73f71bee9131fea259701c576e96a0e7346955b","hash":"1a854193e4fec56c8f37dfa2594a5dc72f1ebfa0e","templateHash":"c114a77f66d936decde6f8601dbc72647ea564b3"}},{"config":{},"construct":"pipeline-function","inputs":[],"name":"process-quote","outputs":{},"policies":["access-quote-source!"],"functionSpec":{"eventType":"stream","functions":[{"name":"addStartOfDayTimestamp","function":"addStartOfDayTimestamp","parameters":{}},{"name":"compileQuotes","function":"compileQuotes","parameters":{}},{"name":"calculateMidPrice","function":"calculateMidPrice","parameters":{}},{"name":"calculateMarketCap","config":{"ISSUE_LOOKUP_URL":"https://api.voxmarkets.co.uk/v2/issues/?filter[where][isin]=:"},"function":"calculateMarketCap","parameters":{}},{"name":"calculate-trade-direction","function":"calculate-trade-direction","parameters":{}},{"name":"calculate-headline","function":"calculate-headline","parameters":{}},{"name":"changeCalculator","function":"changeCalculator","parameters":{}},{"name":"volumeRatioCalculator","function":"volumeRatioCalculator","parameters":{}},{"name":"determine-trading-service","config":{"SEGMENTS_URL":"https://api.voxmarkets.co.uk/v2/segments?filter[include]=tradingService"},"function":"determine-trading-service","parameters":{}},{"name":"tradeFilter","function":"tradeFilter","parameters":{}},{"name":"post-convert-fis","function":"post-convert-fis","parameters":{}},{"name":"post-process","policies":["access-quote-source!"],"function":"post-process","parameters":{}}],"runtime":"nodejs12.x"},"meta":{"identifier":"voxquotes2-process-quote-sandbox","output":"voxquotes2-process-quote-out-sandbox","sources":["voxquotes2-marketlink-tap-out-sandbox"]},"buildSpec":{"functionHash":"1190b699c7172a954074ebbf65190cebc322c6fe","hash":"d2a55e192df061740e5be41f82d57f5041c82bb1","templateHash":"c114a77f66d936decde6f8601dbc72647ea564b3"}},{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"prices-live"},"construct":"sink","inputs":[],"logging":"debug","name":"mongodb-sink","outputs":{},"type":"Function","functionSpec":{"eventType":"stream","functions":[{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"prices-live"},"function":"mongodb-sink","name":"mongodb-sink","parameters":{}}],"runtime":"nodejs12.x"},"meta":{"identifier":"voxquotes2-process-quote-mongodb-sink-sandbox","sources":["voxquotes2-process-quote-out-sandbox"]},"buildSpec":{"functionHash":"deb02d072b03d5c0641992139815bc8ce3454504","hash":"19fc4d48691dd0c9f32008a73b5d22ef161eaa9b7","templateHash":"c114a77f66d936decde6f8601dbc72647ea564b3"}},{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"trades"},"construct":"sink","inputs":[],"name":"write-trade","outputs":{},"type":"Function","functionSpec":{"eventType":"stream","functions":[{"config":{"MONGODB_URI":"${secret.mongodb-sink-uri}","MONGODB_DATABASE":"db1","MONGODB_COLLECTION":"trades"},"function":"write-trade","name":"write-trade","parameters":{}}],"runtime":"nodejs12.x"},"meta":{"identifier":"voxquotes2-process-quote-write-trade-sandbox","sources":["voxquotes2-process-quote-out-sandbox"]},"buildSpec":{"functionHash":"a1bf3c35afb8ab38180cdce4610d12b39ee80ee0","hash":"162d3e3b51691e216e5f3d5447ec985181d8d7393","templateHash":"c114a77f66d936decde6f8601dbc72647ea564b3"}},{"config":{"policy":{"Version":"2012-10-17","Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":"${quote-delay.arn}"}]}},"construct":"resource","inputs":[],"name":"access-quote-source","outputs":{},"type":"aws.iam.Policy","meta":{"identifier":"voxquotes2-access-quote-source-sandbox","sources":[]}},{"config":{},"construct":"source","inputs":[],"name":"new-quote-hook","outputs":{},"meta":{"identifier":"voxquotes2-new-quote-hook-sandbox","sources":[]}},{"config":{"delaySeconds":900},"construct":"source","inputs":[],"name":"quote-delay","outputs":{},"meta":{"identifier":"voxquotes2-quote-delay-sandbox","sources":[]}}]